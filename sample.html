<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <title>簡易抽選システム</title>
    <style>
        input {
            width: 50%;
            padding: 5px;
            margin: 5px;
            font-size: 2em;
        }
    </style>
    <script>
      /**
       * メンバーを抽選する
       */

      function chooseMember() {
        const answer = window.confirm('入力に間違いはないですか？');
        if (answer){
        const form = document.form1;
        const names = form.names.value;
        const list = names.split(',');

        const count = form.num.value;
        let winners = [];

        // 指定された当選者数分だけ for で回す
        for (let i = 0; i < count; i++) {
          /**
           * 乱数の取得に関して、このサイトがわかりやすいです。
           * https://www.sejuku.net/blog/22432
           */
          const chosen_index = Math.floor(Math.random() * list.length);
          // 当選者を当選者用配列に詰める
          winners.push(list[chosen_index]);

          // 応募者リストから、当選したメンバーを除外する
          list.splice(chosen_index, 1);
        }
        output(winners);

        }else{
          return false;

        }

        return false;
        
      }

      /**
       * HTML タグを生成して出力する
       * @param {string[]} winners 当選者の配列
       */
      function output(winners) {
        let elem = document.getElementById('js-list');
        elem.innerText = '';

        let ul = document.createElement('ul');
        for (let i = 0; i < winners.length; i++) {
          let li = document.createElement('li');
          li.innerText = winners[i];
          ul.appendChild(li);

        }

        elem.appendChild(ul);

      }

    </script>
</head>
<body>
  <h1 style="margin-left:50px;"><font color="#696969">簡易抽選システム</font></h1>
  <form name="form1" onsubmit="chooseMember();return false;">

      <div style="
            -webkit-box-sizing:border-box;
            box-sizing: border-box;
            width: 70%
            color :#666;
            background-color: #f0f8ff;
            padding: .7em;
            margin: 1em 0 2em;
            border: 3px solid #6495ed;
            border-radius: 15px;">

        <span><font color="#696969">応募者N人中、M人を選ぶ</font></lavel>

        <p style=" 
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            width:55%;
            color: #666;
            background-color: white;
            font-size: 15px;
            padding:.7em;
            margin-left:50px;
            border: 3px solid #eee9ed;
            border-radius: 10px">
      <label>応募者一覧
          <span><input type="text" name="names" placeholder="カンマ区切りで入力"
            style="width: 400px;"></span>
      </label></p>
          <p style="
              -webkit-box-sizing: border-box;
              box-sizing: border-box;
              width:30%;
              color: #666;
              background-color: white;
              padding:.7em;
              margin-left:50px;
              border: 3px solid #eee9ed;
              border-radius: 15px">
            <span><label>当選者数<input type="number" name="num" style="width:200px;height:50px;">
            </label></p></span>

        

    <br>
    <div style="margin-left:50px;margin-right:10%;">
      <button type="submit" id="submit" 
            style="
            width:40%;
            padding:10px;
            font-size:30px;
            background-color: #4169e1;
            color: white;
            border: 1px solid #bbb
            border-radius:15px;
            box-shadow: -1px -1px 1px #fff;" >抽選する</button>
    </div>
</form>

<div>
    <h2 style="color:#6495ed; margin-left:50px;">当選者一覧</h2>
    
    <marquee behavior="alternate" direction="up" height="60" >
      <div id="js-list" style="margin-left:50px; background-color="#b0c4de";></div></marquee>

  
  </div>    





      <div class="icon02" style="float:center;">
       <br>
        <a href="#"><i class="fab fa-twitter"></i> twitter</a>
      </div>
    


</div>
</body>
</html>
